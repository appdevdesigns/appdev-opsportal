/*OpsPortal/OpsPortal*/
function loadJqueryUi(){define("OpsPortal/OpsPortal",["jquery-ui"],function(){$.widget.bridge("uitooltip",$.ui.tooltip),$.widget.bridge("uibutton",$.ui.button),loadBootstrapStyle()})}function loadBootstrapStyle(){define("OpsPortal/OpsPortal",["bootstrap","bootstrap.css","styles/bootstrap-theme.min.css","styles/jquery.sidr.dark.css","moment","js/jquery.sidr.min","bootstrap-datetimepicker.css","bootbox","FilteredBootstrapTable","OpsButtonBusy","font-awesome.css"],function(){loadBootstrapPlugins()})}function loadBootstrapPlugins(){AD.ui.loading.completed(12),define("OpsPortal/OpsPortal",["bootstrap-table","bootstrap-table.css","bootstrap-datetimepicker","OpsPortal/controllers/OpsPortal","site/labels/OpsPortal"],function(){setupSocket()})}function setupSocket(){AD.ui.loading.completed(7),new AD.controllers.OpsPortal.OpsPortal("#portal"),AD.comm.socket.get({url:"/opsportal/socket/register"}).fail(function(t){console.error(t)}).then(function(){console.log("... OPSPORTAL:  socket registered.")})}define("OpsPortal/OpsPortal",["appdev/appdev","jquery"],function(){AD.ui.loading.attach("#portal"),AD.ui.loading.text(" OpsPortal ..."),AD.ui.loading.resources(19),loadJqueryUi()});
/*OpsPortal/views/MenuList/MenuList.ejs!can/view/ejs/system*/
define("OpsPortal/views/MenuList/MenuList.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("OpsPortal/views/MenuList/MenuList.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('<div class="op-widget" id="op-menu-widget">\n	\n	<div class="op-widget-body">\n		<ul class="op-list" id="op-list-menu">\n			\n		</ul>\n	</div>\n	<div class="op-widget-footer">\n		<a class="op-toggle" href="#" title="appDev Designs"><img '),___v1ew.push(can.view.txt(2,"img","src",this,function(){var e=[];return e.push('src="'),e.push('../../images/appdev_logo_white.png"'),e.join("")})),___v1ew.push(" "),___v1ew.push(can.view.txt(2,"img","style",this,function(){var e=[];return e.push('style="'),e.push('width: 70px; height: auto;"'),e.join("")})),___v1ew.push(" /></a>\n	</div>\n</div>"),___v1ew.join("")}}))});
/*OpsPortal/views/MenuList/menuItem.ejs!can/view/ejs/system*/
define("OpsPortal/views/MenuList/menuItem.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("OpsPortal/views/MenuList/menuItem.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('<li class="op-container" area="'),___v1ew.push(can.view.txt(!0,"li","area",this,function(){return area.key})),___v1ew.push('"',can.view.pending({scope:this}),">"),___v1ew.push("\n	"),___v1ew.push(can.view.txt(0,"li",0,this,function(){var e=[];return"profile"!=area.key&&e.push('<span class="badge pull-right">8</span>'),e.join("")})),___v1ew.push('\n	<span class="icon op-icon"><i class="fa fa-fw op-icon-fw '),___v1ew.push(can.view.txt(!0,"i","class",this,function(){return area.icon})),___v1ew.push('"',can.view.pending({scope:this}),">"),___v1ew.push("</i></span>"),___v1ew.push(can.view.txt(0,"li",0,this,function(){return AD.lang.label.getLabelSpan({key:area.label,context:area.context})})),___v1ew.push("\n</li>\n"),___v1ew.join("")}}))});
/*OpsPortal/controllers/MenuList*/
define("OpsPortal/controllers/MenuList",["appdev/appdev","OpsPortal/views/MenuList/MenuList.ejs!can/view/ejs/system","OpsPortal/views/MenuList/menuItem.ejs!can/view/ejs/system"],function(){AD.Control.extend("OpsPortal.MenuList",{init:function(e,t){var i=this;this.options=AD.defaults({templateDOM:"//OpsPortal/views/MenuList/MenuList.ejs",templateItem:"//OpsPortal/views/MenuList/menuItem.ejs"},t),this.initDOM(),AD.comm.hub.subscribe("opsportal.area.new",function(e,t){i.createArea(t)})},createArea:function(e){this.element.find(".op-widget-body > ul").append(can.view(this.options.templateItem,{area:e})),AD.lang.label.translate(this.element.find("."+e.key))},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))},"#op-list-menu li click":function(e,t){var i=e.attr("area");AD.comm.hub.publish("opsportal.area.show",{area:i}),AD.ui.jQuery.sidr("close","op-menu-widget"),t.preventDefault()}})});
/*OpsPortal/views/Tool/Tool.ejs!can/view/ejs/system*/
define("OpsPortal/views/Tool/Tool.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("OpsPortal/views/Tool/Tool.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('<div class="panel panel-default">\n    <div class="panel-heading">\n        <a class="ad-item-add btn btn-default" href="#">Add</a>\n        <a class="ad-item-delete btn btn-default" '),___v1ew.push(can.view.txt(2,"a","style",this,function(){var e=[];return e.push('style="'),e.push('float:right"'),e.join("")})),___v1ew.push(' href="#">Delete</a>\n    </div>\n    <div class="panel-body">\n        <div class="well" >Content for Tool</div>\n    </div>\n</div>'),___v1ew.join("")}}))});
/*OpsPortal/controllers/Tool*/
define("OpsPortal/controllers/Tool",["appdev/appdev","OpsPortal/views/Tool/Tool.ejs!can/view/ejs/system"],function(){AD.Control.extend("OpsPortal.Tool",{init:function(o,t){var e=this;this.options=AD.defaults({templateDOM:"//OpsPortal/views/Tool/Tool.ejs"},t),this.controller=null,this.sizeData=null,this.isActive=!1,this.isAreaActive=!1;var i=this.options.data.controller;this.controller={needsUpdate:function(){this._needsUpdate=!0},resize:function(o){this._resize=o}};var s=function(o,t){if(200>t)if(AD.controllers.opstools[o])if(AD.controllers.opstools[o].Tool){var i=e.controller;e.controller=new AD.controllers.opstools[o].Tool(e.element),i._needsUpdate&&e.controller.needsUpdate(),i._resize&&e.controller.resize(i._resize)}else console.warn("controller ("+o+").Tool()   not found!"),console.warn("... waiting to try again"),setTimeout(function(){s(o,t+1)},100);else console.warn("controller ("+o+") not found!"),console.warn("... waiting to try again"),setTimeout(function(){s(o,t+1)},100);else console.error("too many attempts to wait for ["+o+"] to load!")};s(i,0),AD.comm.hub.subscribe("opsportal.resize",function(o,t){e.sizeData=t,e.controller.needsUpdate(),e.isAreaActive&&e.isActive&&e.controller.resize(t)}),AD.comm.hub.subscribe("opsportal.area.show",function(o,t){e.areaShow(t)}),AD.comm.hub.subscribe("opsportal.tool.show",function(o,t){e.toolShow(t)}),this.element.hide()},areaShow:function(o){this.options.areaKey==o.area?(this.isAreaActive=!0,this.isActive&&(this.controller.resize(this.sizeData),this.controller.trigger("opsportal.tool.show",{}))):(this.isAreaActive=!1,this.controller.trigger("opsportal.tool.hide",{}))},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))},resize:function(){this.isActive&&this.controller.resize()},toolShow:function(o){o.area==this.options.areaKey&&(o.tool==this.options.key?this.isActive||(this.isActive=!0,this.element.show(),this.controller.resize(this.sizeData),this.controller.trigger("opsportal.tool.show",{})):this.isActive&&(this.isActive=!1,this.element.hide(),this.controller.trigger("opsportal.tool.hide",{})))}})});
/*OpsPortal/views/ToolArea/tool.ejs!can/view/ejs/system*/
define("OpsPortal/views/ToolArea/tool.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("OpsPortal/views/ToolArea/tool.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('        <div class="'),___v1ew.push(can.view.txt(!0,"div","class",this,function(){return key})),___v1ew.push('"',can.view.pending({scope:this}),">"),___v1ew.push("\n                \n		</div>"),___v1ew.join("")}}))});
/*OpsPortal/controllers/ToolArea*/
define("OpsPortal/controllers/ToolArea",["appdev/appdev","OpsPortal/controllers/Tool","OpsPortal/views/ToolArea/tool.ejs!can/view/ejs/system"],function(){AD.Control.extend("OpsPortal.ToolArea",{init:function(o,t){var e=this;this.options=AD.defaults({template_tool:"//OpsPortal/views/ToolArea/tool.ejs"},t),this.dataSource=this.options.dataSource,this.listTools={},AD.comm.hub.subscribe("opsportal.tool.new",function(o,t){e.options.key==t.area&&e.createTool(t)}),AD.comm.hub.subscribe("opsportal.area.show",function(o,t){e.options.key==t.area?e.element.show():e.element.hide()})},createTool:function(o){var t="opsportal-area-tool-"+o.controller,e={key:t};this.element.append(can.view(this.options.template_tool,e));var l=new AD.controllers.OpsPortal.Tool(this.element.find("."+t),{key:o.controller,areaKey:this.options.key,data:o});this.listTools[o.controller]=l},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))}})});
/*OpsPortal/views/WorkArea/area.ejs!can/view/ejs/system*/
define("OpsPortal/views/WorkArea/area.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("OpsPortal/views/WorkArea/area.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('            <div class="'),___v1ew.push(can.view.txt(!0,"div","class",this,function(){return key})),___v1ew.push('"',can.view.pending({scope:this}),">"),___v1ew.push("\n \n            </div>"),___v1ew.join("")}}))});
/*OpsPortal/controllers/WorkArea*/
define("OpsPortal/controllers/WorkArea",["appdev/appdev","OpsPortal/controllers/ToolArea","OpsPortal/views/WorkArea/area.ejs!can/view/ejs/system"],function(){AD.Control.extend("OpsPortal.WorkArea",{init:function(e,t){var a=this;this.options=AD.defaults({template_area:"//OpsPortal/views/WorkArea/area.ejs"},t),this.dataSource=this.options.dataSource,this.initDOM(),this.listAreas={},AD.comm.hub.subscribe("opsportal.area.new",function(e,t){a.createArea(t)})},createArea:function(e){var t="opsportal-area-"+e.key,a={key:t};this.element.append(can.view(this.options.template_area,a));var r=new AD.controllers.OpsPortal.ToolArea(this.element.find("."+t),{key:e.key});this.listAreas[e.key]=r},initDOM:function(){}})});
/*OpsPortal/controllers/SubLinks*/
define("OpsPortal/controllers/SubLinks",["appdev/appdev"],function(){AD.Control.extend("OpsPortal.SubLinks",{init:function(e,t){var a=this;this.options=AD.defaults({},t),this.areaLinks={},this.initDOM(),AD.comm.hub.subscribe("opsportal.area.new",function(e,t){a.createArea(t)}),AD.comm.hub.subscribe("opsportal.tool.new",function(e,t){a.createLink(t)}),AD.comm.hub.subscribe("opsportal.area.show",function(e,t){a.showArea(t)}),AD.comm.hub.subscribe("opsportal.tool.show",function(e,t){a.updateToolLink(t)}),AD.comm.hub.subscribe("opsportal.ready",function(e,t){AD.lang.label.translate(a.element)})},createArea:function(e){this.element.append(can.view("OpsPortal_SubLinks_Area",{area:e})),this.areaLinks[e.key]=this.element.find('[area="'+e.key+'"]')},createLink:function(e){var t=this.areaLinks[e.area];t&&t.append(can.view("OpsPortal_SubLinks_Item",{tool:e}))},showArea:function(e){for(var t in this.areaLinks)t==e.area?this.areaLinks[t].show():this.areaLinks[t].hide()},updateToolLink:function(e){var t=this.areaLinks[e.area];t&&(t.find("."+this.cssActive).removeClass(this.cssActive),t.find('[op-tool="'+e.tool+'"]').addClass(this.cssActive))},initDOM:function(){var e=this.domToTemplate(this.element.find("ul"));this.cssActive=$(e).first().attr("class")||"active",e=e.replace(this.cssActive,""),can.view.ejs("OpsPortal_SubLinks_Item",e),this.element.find("ul").html(" ");var t=this.domToTemplate(this.element);can.view.ejs("OpsPortal_SubLinks_Area",t),this.element.html(" ")},".op-masthead-nav-link click":function(e,t){var a=e.data("tool");AD.comm.hub.publish("opsportal.tool.show",{area:a.area,tool:a.controller}),t.preventDefault()}})});
/*OpsPortal/classes/OpsTool*/
define("OpsPortal/classes/OpsTool",["appdev/appdev"],function(){"undefined"==typeof AD.classes.opsportal&&(AD.classes.opsportal={}),AD.classes.opsportal.OpsTool=can.Control.extend({init:function(o,s){this.options=AD.defaults({resize_notification:"opstool.resize"},s),this.shouldUpdateUI=!0,this.labels=[]},needsUpdate:function(){this.shouldUpdateUI=!0},resize:function(o){this.shouldUpdateUI&&(AD.comm.hub.publish(this.options.resize_notification,o),this.shouldUpdateUI=!1)},translate:function(){this.labels=AD.lang.label.translate(this.element)}}),"undefined"==typeof AD.Control.OpsTool&&(AD.Control.OpsTool={extend:function(o,s,t){"undefined"==typeof AD.controllers.opstools&&(AD.controllers.opstools={});var e=o.split("."),n=AD.controllers.opstools;e.forEach(function(o){"undefined"==typeof n[o]&&(n[o]={}),n=n[o]}),n.Tool=AD.classes.opsportal.OpsTool.extend(s,t),can.extend(n.Tool.prototype,can.event)}})});
/*OpsPortal/classes/ValidationDateGreaterThanField*/
define("OpsPortal/classes/ValidationDateGreaterThanField",["appdev/appdev","jquery","bootstrap.js","bootstrapValidator.js"],function(){$.fn.bootstrapValidator.i18n.dateGreaterThan=$.extend($.fn.bootstrapValidator.i18n.dateGreaterThan||{},{"default":"This value must be greater than field (%s)",notInclusive:"Please enter a value greater than %s"}),$.fn.bootstrapValidator.validators.dateGreaterThan={validate:function(e,a,t){var r=a.val();if(""===r)return!0;var n=t.field||t.value;if("undefined"==typeof n)return console.error("dateGreaterThan() validation rule: no other field specified:",t),!0;var i=e.getDynamicOption(a,n);return r=this._stringToTimestamp(r,t.format),i=this._stringToTimestamp(i,t.format),{valid:t.canEqual?r>=i:r>i,message:$.fn.bootstrapValidator.helpers.format(t.message||$.fn.bootstrapValidator.i18n.greaterThan["default"],t.value)}},_stringToDate:function(e,a,t){"undefined"==typeof t&&(t="/",-1!=a.indexOf("-")&&(t="-"));var r=a.toLowerCase(),n=r.split(t),i=e.split(t),o=n.indexOf("mm"),s=n.indexOf("dd"),d=n.indexOf("yyyy"),l=parseInt(i[o]);l-=1;var f=new Date(i[d],l,i[s]);return f},_stringToTimestamp:function(e,a,t){return this._stringToDate(e,a,t).getTime()}}});
/*OpsPortal/classes/ValidationServer*/
define("OpsPortal/classes/ValidationServer",["appdev/appdev","jquery","bootstrap.js","bootstrapValidator.js"],function(){$.fn.bootstrapValidator.i18n.server=$.extend($.fn.bootstrapValidator.i18n.server||{},{"default":"The server didn't like this."}),$.fn.bootstrapValidator.validators.server={validate:function(t,a,r){return!0}}});
/*OpsPortal/classes/OpsForm*/
define("OpsPortal/classes/OpsForm",["appdev/appdev","can/can","jquery","bootstrap.js","bootstrapValidator.js","OpsPortal/classes/ValidationDateGreaterThanField","OpsPortal/classes/ValidationServer"],function(){"undefined"==typeof AD.op&&(AD.op={}),AD.op.Form=can.Control.extend({},{init:function(a,i){this._Model=null,this.datepickers=[],this.hashElements={},this.listFields=[],this.hashTypes={},this.hashValidations={},this.validator=null,this.isValidated=!1},_clearMessages:function(){var a=this;this.listFields.forEach(function(i){a.element.find('[data-bv-icon-for="'+i+'"]').hide(),a.element.find('[data-bv-for="'+i+'"]').hide()})},addField:function(a,i,t){-1==this.listFields.indexOf(a)&&(this.listFields.push(a),("date"==i||"datetime"==i)&&this.datepickers.push(a),this.hashTypes[a]=i,this.hashValidations[a]={validators:t})},addValidation:function(a,i){var t=this.hashValidations[a];if(t)for(var e in i)t.validators[e]=i[e];else console.warn("*** OpsForm.addValidation() field["+a+"] not found.")},attach:function(){var a=this;this.hashElements={},this.listFields.forEach(function(i){var t=a.element.find("[name='"+i+"']");t.length>0&&(a.hashElements[i]=t)}),this.datepickers.forEach(function(i){var t=a.hashElements[i];if(t){var e={stepping:5};if(a.hashValidations[i]&&a.hashValidations[i].validators.date){var s=a.hashValidations[i].validators.date;s.format=s.format.toUpperCase(),e.format=s.format||e.format,s.min&&(e.minDate=s.min),s.max&&(e.maxDate=s.max)}t.datetimepicker(e).on("dp.change",function(t){a.validator.revalidateField(i)})}});var i={framework:"bootstrap",message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"}};i.fields=jQuery.extend(!0,{},this.hashValidations),this.validator=this.element.bootstrapValidator(i).data("bootstrapValidator"),this.isValidated=!1},bind:function(a){var i=this,t=null;a.getID&&a.getLabel&&(t=a,a=a.model()),this._Model=a,this._instance=t,this.datepickers=[],this.hashTypes={},this.hashValidations={},this.listFields=[];var e=this._Model.describe();for(var s in e){var r=e[s],n={};a.validations&&(validations=a.validations[s],validations.forEach(function(a){var t=i.entryToKey(a),e=i.entryToConfig(a);n[t]=e})),n.server={},this.addField(s,r,n)}},clear:function(){this.isValidated=!1,this.validator.resetForm(!0),this._clearMessages()},elAdd:function(a){var i=this,t=function(a){a.jQuery||(a=$(a));var t={},e=a.attr("data-bv-field")||a.attr("name");i.hashValidations[e]&&(t=i.hashValidations[e]),i.validator.addField(a,t)};$.isArray(a)||a.length?a.each(function(a,i){t(i)}):t(a)},elRemove:function(a){var i=this;$.isArray(a)||a.length?a.each(function(a,t){t.jQuery||(t=$(t)),i.validator.removeField(t)}):(a.jQuery||(a=$(a)),this.validator.removeField(a))},errorHandle:function(a){var i=this;if(a.status&&(a=a.data||a),a.error)switch(a.error){case"E_VALIDATION":for(var t in a.invalidAttributes){var e=[];a.invalidAttributes[t].forEach(function(a){e.push(a.message)}),i.validator.updateMessage(t,"server",e.join("<br>")),i.validator.updateStatus(t,i.validator.STATUS_INVALID,"server")}return!0;case"E_UNKNOWN":return a.raw&&a.raw[0].err?i.errorHandle(a.raw[0].err):!1}return console.log(a),!1},errors:function(){return this.validator.getMessages()},isValid:function(){return this.validator?(this.isValidated||(this.validator.validate(),this.isValidated=!0),this.validator.isValid()):!1},reset:function(){this.isValidated=!1,this.validator.resetForm(!1),this._clearMessages()},values:function(a){return a?this._valuesSet(a):this._valuesGet()},_valuesGet:function(){var a=this.element.find(":input").serializeArray(),i={};a.forEach(function(a){"undefined"==typeof i[a.name]?i[a.name]=a.value:$.isArray(i[a.name])?i[a.name].push(a.value):i[a.name]=[i[a.name],a.value]});for(var t in this.hashTypes)i[t]&&"array"==this.hashTypes[t]&&($.isArray(i[t])||(i[t]=[i[t]]));return i},_valuesSet:function(a){var i=this;return this.clear(),this.listFields.forEach(function(t){if(a[t]){var e=i.element.find("[name='"+t+"']");e.length>0&&e.val(a[t])}}),null},translateLabels:function(a){$.each(this.labels,function(){this.translate(a)})},entryToKey:function(a){var i=a.split(":");return i[0]},entryToConfig:function(a){var i={},t=a.split(":");if(t.length>1){t.shift();var e=t.join(":");try{i=AD.sal.parseJSON(e)}catch(s){console.error("AD.ui.form.entryToConfig():"),console.error("!! invalid config options : "+e)}}return i},setupValidations:function(){}})});
/*OpsPortal/classes/OpsDialog*/
define("OpsPortal/classes/OpsDialog",["appdev/appdev"],function(){"undefined"==typeof AD.op&&(AD.op={}),AD.op.Dialog={Confirm:function(e){var o=e.title||"Confirm",a=e.message||"Are you sure you want to do this?",l=e.labelYes||"yes",n=e.labelNo||"no",s=e.fnYes||function(){},t=e.fnNo||function(){};bootbox.dialog({title:o,message:a,buttons:{yes:{label:l,className:"btn-primary",callback:s},no:{label:n,className:"btn-default",callback:t}}})}}});
/*OpsPortal/classes/OpsWidget*/
define("OpsPortal/classes/OpsWidget",["appdev/appdev"],function(){"undefined"==typeof AD.op&&(AD.op={}),AD.op.Widget=can.Control.extend({},{init:function(e,t){t=AD.defaults({},t),this.options=t,this._super(e,t),this.initDOM()},initDOM:function(){},resize:function(e){this.element.css("height",e.height+"px");var t=this.element.find(".op-widget-footer").outerHeight(!0),i=this.element.find(".op-widget-masthead").outerHeight(!0);this.element.find(".op-widget-body").css("height",e.height-i-t+"px")}})});
/*OpsPortal/views/OpsPortal/OpsPortal.ejs!can/view/ejs/system*/
define("OpsPortal/views/OpsPortal/OpsPortal.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("OpsPortal/views/OpsPortal/OpsPortal.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('<!-- \n#  Appdev Label Info:\n#label_context:opsportal\n#language_code:en\n-->\n<div class="container">\n    <!-- Masthead -->\n	<div class="op-container op-masthead">\n        \n		<div class="op-container" id="op-masthead-menu">\n			<a href="#sidr-main"><span class="icon"><i class="fa fa-bars"></i></span><span app-label-key="opp.menu">Menu</span><span class="badge">16</span></a>\n		</div>\n		\n		<div class="op-container" id="op-masthead-nav">\n			<ul class="list-unstyled list-inline" area="[[= area.key ]]">\n				<li class="active" op-tool="[[= tool.controller ]]"><a href="#" class="op-masthead-nav-link" role="button" obj-embed="tool">[[- AD.lang.label.getLabelSpan({ key: tool.label, context:tool.context }) ]]</a></li>\n				<li class="mockup"><a href="#" class="" role="button" obj-embed="tool">Sublink 2</a></li>\n				<li class="mockup"><a href="#" class="" role="button" obj-embed="tool">Sublink 3</a></li>\n			</ul>\n		</div>\n    </div>\n	\n	<!-- Global menu (Widget hidden by default) -->\n	<div class="op-menu-widget"></div>\n	\n	<!-- Stage -->\n	<div class="op-container op-stage"></div>\n		\n	<!-- <div id="opsportal-loading" class="opsportal-content opsportal-loading-global"><div></div></div> -->\n    \n</div>\n'),___v1ew.join("")}}))});
/*OpsPortal/views/OpsPortal/taskList.ejs!can/view/ejs/system*/
define("OpsPortal/views/OpsPortal/taskList.ejs!can/view/ejs/system",["can/view/ejs/ejs"],function(can){return can.view.preloadStringRenderer("OpsPortal/views/OpsPortal/taskList.ejs",can.EJS(function(_CONTEXT,_VIEW){with(_VIEW)with(_CONTEXT){var ___v1ew=[];return ___v1ew.push('<!-- \n#  Appdev Label Info:\n#label_context:opsportal\n#language_code:en\n-->\n<div class="panel panel-default op-container">\n    <div class="op-masthead">\n        <a href="#"><span app-label-key="opp.enterPortal">Enter the Portal </span><!-- <span class="badge">16</span> --></a>\n    </div>\n    <div class="opsportal-list-area">\n        <div class="opsportal-tasklist-menu-widget"></div>\n        <!-- <div id="opsportal-loading" class="opsportal-content opsportal-loading-global"><div></div></div> -->\n    </div>\n</div>'),___v1ew.join("")}}))});
/*OpsPortal/controllers/OpsPortal*/
define("OpsPortal/controllers/OpsPortal",["appdev/appdev","jquery","OpsPortal/portal-scratch.css!$css","OpsPortal/opsportal.css!$css","OpsPortal/opsportal-theme.css!$css","OpsPortal/controllers/MenuList","OpsPortal/controllers/WorkArea","OpsPortal/controllers/SubLinks","OpsPortal/classes/OpsTool","OpsPortal/classes/OpsForm","OpsPortal/classes/OpsDialog","OpsPortal/classes/OpsWidget","OpsPortal/views/OpsPortal/OpsPortal.ejs!can/view/ejs/system","OpsPortal/views/OpsPortal/taskList.ejs!can/view/ejs/system"],function(){if("undefined"==typeof t)var t=AD.ui.jQuery;"undefined"==typeof AD.controllers.opstools&&(AD.controllers.opstools={}),AD.Control.extend("OpsPortal.OpsPortal",{init:function(t,o){var e=this;this.options=AD.defaults({"portal-autoenter":!1,templateDOM:"//OpsPortal/views/OpsPortal/OpsPortal.ejs",templateList:"//OpsPortal/views/OpsPortal/taskList.ejs",templateError:"//OpsPortal/views/OpsPortal/error.ejs"},o),this.hiddenElements=[],this.elOptions(),this.initPortal(),AD.ui.loading.reset(),AD.ui.loading.text(AD.lang.label.getLabel("opp.configuringTools")),AD.ui.loading.resources(2),this.requestConfiguration();var s=function(){e.resize()};AD.ui.jQuery(document).ready(s),AD.ui.jQuery(window).resize(s),AD.comm.hub.subscribe("opsportal.area.show",function(t,o){setTimeout(s,4)})},elOptions:function(){var t=this,o=["portal-autoenter"];o.forEach(function(o){var e=t.element.attr(o);"undefined"!=typeof e&&(e=e.toLowerCase(),"false"==e&&(e=!1),t.options[o]=e)})},initDOM:function(){this.element.html(can.view(this.options.templateList,{}))},initDOMError:function(t){this.element.html(can.view(this.options.templateError,{errorMessage:t})),AD.lang.label.translate(this.element)},initPortal:function(){this.portalPopup=AD.ui.jQuery('<div class="op-portal-popup">'),this.portalPopup.hide(),this.portalPopup.html(can.view(this.options.templateDOM,{})),this.menu=new AD.controllers.OpsPortal.MenuList(this.portalPopup.find(".op-menu-widget")),this.workArea=new AD.controllers.OpsPortal.WorkArea(this.portalPopup.find(".op-stage"));var t=AD.Control.get("OpsPortal.SubLinks");this.subLinks=new t(this.portalPopup.find("#op-masthead-nav")),this.dom={},this.dom.resize={},this.dom.resize.masthead=this.portalPopup.find(".op-masthead"),AD.ui.jQuery("body").append(this.portalPopup),AD.lang.label.translate(this.portalPopup)},portalDisplay:function(){var o=this;this.hiddenElements=[],t("body").children().each(function(e){var s=t(this);s!=o.portalPopup&&(s.hide(),o.hiddenElements.push(s))}),this.portalPopup.show()},portalHide:function(){this.hiddenElements.forEach(function(t){t.show()}),this.portalPopup.hide()},resize:function(){var o=t(window).height(),e=this.dom.resize.masthead.outerHeight(!0);console.log("//// resize: window.height:"+o+" masthead.outer:"+e);var s=t(window).height()-e;AD.comm.hub.publish("opsportal.resize",{height:s-1})},requestConfiguration:function(){var t=this;AD.ui.loading.completed(1),AD.comm.service.get({url:"/opsportal/config"},function(o,e){if(AD.ui.loading.completed(1),o){var s=AD.lang.label.getLabel("opp.errorNoPermission")||" You don't have permission.  Ask your administrator to grant you access. ";t.initDOMError(s)}else{AD.ui.loading.resources(e.areas.length),AD.ui.loading.resources(e.tools.length);var a={};e.areas[0]&&(a=e.areas[0]);for(var r=0;r<e.areas.length;r++)AD.comm.hub.publish("opsportal.area.new",e.areas[r]),e.areas[r].isDefault&&(a=e.areas[r]),AD.ui.loading.completed(1);var i={};e.tools[0]&&(i[e.tools[0].area]=e.tools[0]);for(var l=0;l<e.tools.length;l++)AD.comm.hub.publish("opsportal.tool.new",e.tools[l]),e.tools[l].isDefault&&(i[e.tools[l].area]=e.tools[l]),AD.ui.loading.completed(1);t.resize(),AD.comm.hub.publish("opsportal.area.show",{area:a.key});for(var l in i)AD.comm.hub.publish("opsportal.tool.show",{area:i[l].area,tool:i[l].controller});t.portalPopup.find("#op-masthead-menu a:first-of-type").sidr({name:"op-menu-widget",side:"left"}),t.initDOM(),AD.lang.label.translate(t.element),AD.comm.hub.publish("opsportal.ready",{}),t.options["portal-autoenter"]&&t.element.find(".op-masthead a:first-of-type").click()}})},".op-masthead a:first-of-type click":function(t,o){this.portalDisplay(),o.preventDefault()},".ad-item-add click":function(t,o){o.preventDefault()},progress:function(t,o){var e=t*o.width()/100;o.find("div").animate({width:e},500).html(t+"%&nbsp;")}})});